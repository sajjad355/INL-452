<div class="tab-container">
  <h2>Manage Folder Locations</h2>

  
  

  <div class="row control-box">
    <button class="btn btn-default menu-btn" (click)="createNewLocation()"> 
      <i class="fa fa-plus" aria-hidden="true"></i> New Folder Location
    </button>
  </div>

  <ngb-alert *ngIf="!hideWarning" (close)="hideWarning=true">
    <ng-container *ngFor="let warning of inputWarning; let i = index">
      <p>
        <strong>{{warning}}</strong>
      </p>
    </ng-container>
  </ngb-alert>

  <div *ngIf="!isNewLocation" class="col-lg-12 col-md-12 col-sm-12 col-xs-12 table-container">
    <span class="field-title mb-2">Select Folder Location</span>
    <select class="form-control" id="locationSelection"  #locationSelection (change)="selectLocation(locationSelection.value);">
      <option disabled>Folder location</option>
      <option *ngFor="let l of locations" [value]="l.dbid" [selected]="selectedLocation?.dbid == l.dbid">{{l.title}}</option>
    </select>

    <div class="row folder-location-details mt-3" *ngIf="showDetails">
      <div *ngIf="!isNewLocation" class="col-lg-3 col-md-3 col-sm-6 col-xs-12">
        <div class="form-group">
          <div style="display: flex; align-items: center; flex-direction: row;">
            <label class="print-none mr-3" style="font-size: 14px; font-weight: bold;">Location ID</label>
            <button class="btn-icon btn-xs print-none" style="margin-top: -6px !important; font-size: 11px;" (click)="printBarcode()">
              <i class="fa fa-print far-2x" style="font-size: 16px;"></i>&nbsp;&nbsp;PRINT
            </button>
          </div>
          <div class="section-to-print" id="barcode"></div>
        </div>
      </div>

      <div class="col-lg-9">
        <div class="row">
          <div class="col-lg-4 col-md-4 col-sm-6 col-xs-12">
            <div class="form-group">
              <label>Location Title</label>
              <input
                type="text"
                class="form-control"
                placeholder="Location Title"
                value="{{ selectedLocation.title }}"
                [(ngModel)]="selectedLocation.title"
                [ngModelOptions]="{ standalone: true }" 
              >
            </div>
          </div>
          <div class="col-lg-4 col-md-4 col-sm-6 col-xs-12">
            <div class="form-group">
              <label>Employee</label>
              <select
                class="form-control"
                #updateEmployee
                (change)="setEmployee(updateEmployee.value, 'update')"
              >
                <option value="-1">Choose Employee</option>
                <option *ngFor="let user of employeeList" 
                  [value]="user.userId" 
                  [selected]="selectedLocation.employee?.userId == user.userId">
                  {{ user.name }}
                </option>
              </select>
            </div>
          </div>
          <div class="col-lg-4 col-md-4 col-sm-6 col-xs-12">
            <div class="form-group">
              <label>Project Manager</label>
              <select
                class="form-control"
                #updateProjectManager
                (change)="setProjectManager(updateProjectManager.value, 'update')"
              >
                <option value="-1">Choose Manager</option>
                <option *ngFor="let user of managerList" 
                  [value]="user.userId" 
                  [selected]="selectedLocation.projectManager?.userId == user.userId">
                  {{ user.name }}
                </option>
              </select>
            </div>
          </div>
          <div class="col-lg-4 col-md-4 col-sm-6 col-xs-12">
            <div class="form-group">
              <label>Email Address</label>
              <input
                disabled
                type="email"
                class="form-control"
                placeholder="Email Address"
                value="{{ selectedLocation.employee?.email }}"
              >
            </div>
          </div>
        </div>
      </div>

      <div class="text-center col-md-12 pt-3">
        <button class="btn btn-info" (click)="hide()">
          Cancel
        </button>
        <button class="btn btn-primary ml-3" (click)="saveLocation()">
          Save
        </button>
      </div>
    </div>
  </div>

  <div *ngIf="isNewLocation" class="col-lg-12 col-md-12 col-sm-12 col-xs-12 table-container">
    <div class="row folder-location-details mt-3">
      <div class="col-lg-3 col-md-3 col-sm-6 col-xs-12">
        <div class="form-group">
          <label>Location Title</label>
          <input
            type="text"
            class="form-control"
            placeholder="Location Title"
            value="{{ newLocation.title }}"
            [(ngModel)]="newLocation.title"
            [ngModelOptions]="{ standalone: true }" 
          >
        </div>
      </div>
      <div class="col-lg-3 col-md-3 col-sm-6 col-xs-12">
        <div class="form-group">
          <label>Employee</label>
          <select
            #employee
            class="form-control"
            (change)="setEmployee(employee.value, 'new')"
          >
            <option value="-1">Choose Employee</option>
            <option *ngFor="let user of employeeList" 
              [value]="user.userId" 
            >
              {{ user.name }}
            </option>
          </select>
        </div>
      </div>
      <div class="col-lg-3 col-md-3 col-sm-6 col-xs-12">
        <div class="form-group">
          <label>Project Manager</label>
          <select
            #projectManager
            class="form-control"
            (change)="setProjectManager(projectManager.value, 'new')"
          >
            <option value="-1">Choose Manager</option>
            <option *ngFor="let user of managerList" 
              [value]="user.userId" 
            >
              {{ user.name }}
            </option>
          </select>
        </div>
      </div>
      <div class="col-lg-3 col-md-3 col-sm-6 col-xs-12">
        <div class="form-group">
          <label>Email Address</label>
          <input
            disabled
            type="email"
            class="form-control"
            placeholder="Email Address"
            value="{{ newLocation.employee?.email }}"
          >
        </div>
      </div>
    </div>

    <div class="text-center col-md-12 pt-3">
      <button class="btn btn-info" (click)="hide()">
        Cancel
      </button>
      <button class="btn btn-primary ml-3" (click)="addLocation()">
        Save
      </button>
    </div>
  </div>

</div>