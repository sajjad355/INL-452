<form class="warn-container" class="search-container">
  <mat-form-field *ngIf="stepInfo.mode === 'experiment'" appearance="outline" class="width-100p">
    <!-- <input type="text" matInput [matAutocomplete]="auto" [formControl]="myControl" (change)="onChange()" (click)="triggerFilter()" [placeholder]="placeHolder"> -->

      <mat-label>Equipment</mat-label>
      <input type="text" matInput [matAutocomplete]="auto" [formControl]="myControl" [placeholder]="'Search Equipment Name'">
      <!-- <mat-hint *ngIf="warn === true" align="end" class="orange600 font-heavy">Input value does not exist in the database</mat-hint> -->
      <!-- <mat-error *ngIf="warn === true">Input value is not existed in the database</mat-error> -->


    <mat-autocomplete #auto = "matAutocomplete" (optionSelected)="onSelect($event)" [displayWith]="displayFn" >
      <mat-option *ngFor="let option of filteredOptions | async" [value]="option">
        <span class="cat-style">{{option.serial}}</span>
        <span *ngIf="option.active && option.qualified" class="space"></span>
        <span *ngIf="option.active && !option.qualified" matTooltip="Equipment is not qualified"
        [matTooltipPosition]="'above'" class="material-icons orange600 margin-left-8 margin-right-18 cursor-pointer">
          info
        </span>
        <span >{{option.name}}</span>
      </mat-option>
    </mat-autocomplete>

    <!-- <mat-autocomplete #auto = "matAutocomplete" (optionSelected)="emitChange($event)" >
      <mat-option *ngFor="let option of filteredOptions | async" [value]="option.lotnumber || option">
        <span *ngIf="listContentType === 'object' && option.includes('/')" class="cat-style">{{displayFn(option, 'primary')}}</span>
        <span *ngIf="listContentType === 'object' && !option.includes('/')" class="cat-style">Not Found</span>
        <span *ngIf="listContentType === 'object'">{{displayFn(option, 'secondary')}}</span>
        <span *ngIf="listContentType === 'string'">{{option.lotnumber}}</span>
      </mat-option>
    </mat-autocomplete> -->
  </mat-form-field>
</form>

<div *ngIf="dataSource.length > 0" class="width-100p">
  <table mat-table [dataSource]="dataSource" matSort (matSortChange)="sortData($event)">

    <!-- Position Column -->
    <ng-container matColumnDef="position">
      <th mat-header-cell *matHeaderCellDef mat-sort-header> No. </th>
      <td mat-cell *matCellDef="let element"> {{element.position}} </td>
    </ng-container>

    <!-- Study Number Column -->
    <ng-container matColumnDef="name">
      <th mat-header-cell *matHeaderCellDef mat-sort-header> Name </th>
      <td mat-cell *matCellDef="let element"> {{element.name}} </td>
    </ng-container>

    <!-- Name Column -->
    <ng-container matColumnDef="id">
      <th mat-header-cell *matHeaderCellDef mat-sort-header> Somru ID </th>
      <td mat-cell *matCellDef="let element"> {{element.id}} </td>
    </ng-container>

    <!-- Type Column -->
    <ng-container matColumnDef="serial">
      <th mat-header-cell *matHeaderCellDef mat-sort-header> Serial </th>
      <td mat-cell *matCellDef="let element"> {{element.serial}} </td>
    </ng-container>

    <!-- Objective Column -->
    <ng-container matColumnDef="manufacturer">
      <th mat-header-cell *matHeaderCellDef mat-sort-header> Manufacturer </th>
      <td mat-cell *matCellDef="let element"> {{element.manufacturer}} </td>
    </ng-container>

    <!-- Author Column -->
    <ng-container matColumnDef="model">
      <th mat-header-cell *matHeaderCellDef mat-sort-header> Model </th>
      <td mat-cell *matCellDef="let element"> {{element.model}} </td>
    </ng-container>



    <!-- ID Column (used for template actions) -->
    <ng-container matColumnDef="action">
      <th mat-header-cell *matHeaderCellDef></th>
      <td mat-cell *matCellDef="let element">
        <!-- <button *ngIf="!element.status" mat-raised-button color="warn" (click)="onDelete(element.id)" class="btn-size-150 warn-btn-animation">
          Remove
        </button> -->
        <button *ngIf="stepInfo.mode === 'experiment'" mat-raised-button color="warn" (click)="onDelete(element.id)" class="btn-size-150 warn-btn-animation">
          Remove
        </button>
      </td>
    </ng-container>

    <!-- Warn Column -->
    <ng-container matColumnDef="warn">
      <th mat-header-cell *matHeaderCellDef></th>
      <td mat-cell *matCellDef="let element">
        <span *ngIf="element.warn" class="material-icons orange600 md-48 cursor-pointer" matTooltip="Equipment is not qualified"
        [matTooltipPosition]="'above'">
          info
        </span>
      </td>
    </ng-container>



    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns;" class="item-animation"></tr>
  </table>
  <!-- <mat-paginator
    [length]="5"
    [pageSize]="5"
    [style.width]="'1000px'"
    showFirstLastButtons>
  </mat-paginator> -->
  </div>
