
<div class="attachment-container" appFmcDragDrop (onFileDropped)="uploadFile($event)" >
  <!-- <span class="material-icons md-48 attachment-collapse-btn" (click)="closePanel()">
    keyboard_arrow_up
  </span> -->

  <div class="attachment-upload-btn" [style.padding-left]="padding" [style.padding-right]="padding">
    <span class="upload-btn-txt" (click)="fileInput.click()">
      Attach Files
    </span>

    <input hidden type="file" #fileInput (change)="uploadFile($event.target.files)">

    <span *ngIf="numOfAtt > 0" class="att-quantity">
      ( Quantity: {{numOfAtt}} )
    </span>
  </div>

  <div *ngIf="isLoading" class="loader"></div>
  <ul class="attachment-list-container" [class.opacity-02]="isLoading">
    <li *ngFor="let attachment of QSQ | async" class="attachment-list-item-container">
      <div
      class="attachment-list-item-txt-container"
      (contextmenu)="openMenu($event, menuTrigger)"
      [matTooltipPosition]="'right'"
      [matTooltipShowDelay]="300"
      [matTooltip]="attachment.name"
      [matTooltipDisabled]="true">
        <!-- <span>{{attachment.name.length > 19 ? attachment.name.slice(0, 17) + '...' : attachment.name}}</span> -->
        <span>{{attachment.name}}</span>
      </div>

      <span [matMenuTriggerFor]="attMenu" [matMenuTriggerData]="{attachment: attachment}" #menuTrigger="matMenuTrigger"></span>

      <div class="attachment-list-item-icon-container" (click)="deleteFile(attachment)">
        <span class="material-icons">
          close
        </span>
      </div>
    </li>
  </ul>

  <mat-menu #attMenu="matMenu" [overlapTrigger]="false" xPosition="after" yPosition="below">
    <ng-template matMenuContent let-attachment="attachment">
      <button mat-menu-item (click)="openRenameDialog(attachment)">
        <mat-icon>edit</mat-icon>
        <span>Rename</span>
      </button>
      <button mat-menu-item (click)="downloadFile(attachment)">
        <mat-icon>download</mat-icon>
        <span>Download</span>
      </button>
    </ng-template>
  </mat-menu>

</div>

